<!DOCTYPE html>
<html lang="en">
<head>
        <meta charset="utf-8" />
        <title>"Teaching Elasticsearch reading Chinese in 1 Minutes "</title>
        <link rel="stylesheet" href="http://leohung.net/theme/css/main.css" />
        <link href="http://leohung.net/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="LeoHung.self() Atom Feed" />

        <!--[if IE]>
            <script src="http://html5shiv.googlecode.com/svn/trunk/html5.js"></script>
        <![endif]-->
</head>

<body id="index" class="home">
        <header id="banner" class="body">
                <h1><a href="http://leohung.net/">LeoHung.self() </a></h1>
                <nav><ul>
                    <li><a href="#education">Education</a></li>
                    <li><a href="#experience">Experience</a></li>
                    <li><a href="#projects">Projects</a></li>
                    <li><a href="#skills">Skills</a></li>
                    <li><a href="#publication">Publication</a></li>
                    <li><a href="archives.html">Blog</a></li>
                    <li><a href="http://leohung.net/pages/itakecare.html">"iTakeCare"</a></li>
                    <li><a href="http://leohung.net/pages/magic-hand.html">"Magic Hand"</a></li>
                    <li><a href="http://leohung.net/pages/metamorphicmessages.html">"metamorphicmessages"</a></li>
                    <li><a href="http://leohung.net/pages/ohmytype.html">"Oh!MyType!"</a></li>
                    <li><a href="http://leohung.net/pages/portfolio.html">"portfolio"</a></li>
                    <li><a href="http://leohung.net/pages/social-power-analyzer-for-plurk.html">"Social Power Analyzer for Plurk"</a></li>
                    <li><a href="http://leohung.net/pages/zuo-pin-ji.html">"作品集"</a></li>
                    <li><a href="http://leohung.net/pages/san-chuan-leo-hung.html">"San-Chuan (Leo) Hung"</a></li>
                    <li class="active"><a href="http://leohung.net/category/_posts.html">_posts</a></li>
                </ul></nav>
        </header><!-- /#banner -->
<section id="content" class="body">
  <article>
    <header>
      <h1 class="entry-title">
        <a href="http://leohung.net/teaching-elasticsearch-reading-chinese-in-1-minutes.html" rel="bookmark"
           title="Permalink to "Teaching Elasticsearch reading Chinese in 1 Minutes "">"Teaching Elasticsearch reading Chinese in 1 Minutes "</a></h1>
    </header>

    <div class="entry-content">
<footer class="post-info">
        <abbr class="published" title="2014-04-26T19:07:00+02:00">
                Published: Sat 26 April 2014
        </abbr>

        <address class="vcard author">
                By                         <a class="url fn" href="http://leohung.net/author/leohung.html">leohung</a>
        </address>
<p>In <a href="http://leohung.net/category/_posts.html">_posts</a>. </p>

</footer><!-- /.post-info -->      <h1>Teaching Elasticsearch reading Chinese in 1 Minutes</h1>
<p>Elasticsearch(es) is a powerful open source solution for searching, which is serving in wikipedia currently; however, Chinese users is not so lucky with es, becasue the default analyzer of es cannot deal with Chinese well, which will tokenzie Chinese sentences into individual characters, rather than terms, causing large amount of noise in retrieved results.</p>
<p>To enhance the performance of retrieval, setting the analyzer is necessary; however, there is no quick and effective plug-in for traditional Chinese. IKAnalyzer, developed by China community, may be the best plug-in for Chinese Elasticsearch engineers to serve the job, but IKAnalyzer cannot be set easily.</p>
<p>If you just want a quick solution, cjk analyzer is the best solution. The algorithm of cjk analyzer is easy to be understood: tokenizing sentences to  bi-gram terms. For example, "我愛吃飯" will be transformed into "我愛", "愛吃", "吃飯". The analyzer is naive but powerful to enhance es performance.</p>
<p>The below is the setting syntax :</p>
<div class="highlight"><pre>PUT &quot;index name&quot;
&quot;settings&quot;: {
     &quot;analysis&quot;:{
        &quot;analyzer&quot;:{
            &quot;default&quot;:{&quot;type&quot;:&quot;cjk&quot;}
        }
     }
}
</pre></div>


<p>Beware, the setting only work when the index is empty. If there are data in the index, do not forget to re-index it.</p>
<h1>一分鐘搞定Elasticsearch中文設定</h1>
<p>Elasticsearch(es)是一套強大的搜尋引擎套件，目前維基百科正是使用es作為搜尋套件。但是，es的預設設定對中文使用者並不是很友善，因為es預設的分析器(Analyzer)不能處理好中文的斷詞(tokenization)，會把中文詞切成一個字一個字，而非以詞組為單位，使得搜尋效果變差，時常會搜尋到過多雜訊。</p>
<p>因此，需要設定好es的斷詞設定，才能強化中文搜尋的結果。但可惜的是，繁體中文並沒有已經被最佳化的套件可以無痛與es接軌。目前已知比較好的方案，像是中國社群(誰?)發展出 IKanalyzer ，但需要花一點時間做複雜的設定。</p>
<p>如果只是短期內需要一個堪用的做法，可以試試看cjk分析器。cjk分析器的原理很簡單，也就只是做 Bi-Gram，把讀進來的句子，兩個兩個切成一個詞。例如：「我愛吃飯」，就變成「我愛, 愛吃, 吃飯」。簡單的設定，就可以強化es的搜尋結果。</p>
<p>設定的語法如下：</p>
<div class="highlight"><pre>PUT &quot;index name&quot;
&quot;settings&quot;: {
     &quot;analysis&quot;:{
        &quot;analyzer&quot;:{
            &quot;default&quot;:{&quot;type&quot;:&quot;cjk&quot;}
        }
     }
}
</pre></div>


<p>請注意，settings必須在index剛建立之初設定才有效。如果index裡面已經有資料，請reindex你的資料庫。</p>
    </div><!-- /.entry-content -->

  </article>
</section>
        <section id="extras" class="body">
                <div class="social">
                        <h2>social</h2>
                        <ul>
                            <li><a href="http://leohung.net/feeds/all.atom.xml" type="application/atom+xml" rel="alternate">atom feed</a></li>

                            <li><a href="https://github.com/LeoHung">github</a></li>
                        </ul>
                </div><!-- /.social -->
        </section><!-- /#extras -->

        <footer id="contentinfo" class="body">
                <address id="about" class="vcard body">
                Proudly powered by <a href="http://getpelican.com/">Pelican</a>, which takes great advantage of <a href="http://python.org">Python</a>.
                </address><!-- /#about -->

                <p>The theme is by <a href="http://coding.smashingmagazine.com/2009/08/04/designing-a-html-5-layout-from-scratch/">Smashing Magazine</a>, thanks!</p>
        </footer><!-- /#contentinfo -->

</body>
</html>